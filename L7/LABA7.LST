Turbo Assembler	 Version 3.1	    04/23/24 12:56:01	    Page 1
laba7.asm



      1	0000			     DATASG SEGMENT 'DATA'
      2	0000  30 31 32 33 34 35	36+  TABLHEX DB	'0123456789ABCDEF'
      3	      37 38 39 41 42 43	44+
      4	      45 46
      5	0010  82 A2 A5 A4 A8 E2	A5+  MSG DB 'Введите шетнадцатеричное число(HHHH, * - конец программы):$'
      6	      20 E8 A5 E2 AD A0	A4+
      7	      E6 A0 E2 A5 E0 A8	E7+
      8	      AD AE A5 20 E7 A8	E1+
      9	      AB AE 28 48 48 48	48+
     10	      2C 20 2A 20 2D 20	AA+
     11	      AE AD A5 E6 20 AF	E0+
     12	      AE A3 E0 A0 AC AC	EB+
     13	      29 3A 24
     14	004B  64*(00)		     BUF    DB	100 DUP( 0 )
     15	00AF  0000		     DECW   DW	0
     16	00B1			     DATASG ENDS
     17
     18	0000			     STSEG SEGMENT STACK 'STACK'
     19	0000  0100*(0000)	      DW 256 DUP(0)
     20	0200			     STSEG ENDS
     21
     22	0000			     MYCODE SEGMENT 'CODE'
     23					 ASSUME	CS:MYCODE, DS:DATASG, SS:STSEG
     24	0000			     START:
     25				     ; Загрузка	сегментного регистра данных DS
     26	0000  B8 0000s			 MOV AX, DATASG
     27	0003  8E D8			 MOV DS, AX
     28				     ;;	Цикл проверки ввода *
     29	0005  B4 00			 MOV AH, 00H
     30	0007  B0 03			 MOV AL, 03H
     31	0009  CD 10			 INT  10H
     32				     ;
     33	000B  B4 09			 MOV AH, 9H
     34	000D  BA 0010r			 LEA DX, MSG
     35	0010  CD 21			 INT 21h
     36	0012  E8 00DB			 CALL LFCR
     37				     ;;
     38	0015  B9 0003			 MOV CX, 3
     39	0018			     METLOOP:
     40				     ; Цикл ввода строки
     41	0018  E8 00E0			 CALL GETSIMB
     42	001B  3C 2A			 CMP AL, '*'
     43	001D  74 27			 JE MEND
     44				     ; Ввод шетн. числа	и запоминание в	BUF
     45	001F  E8 0030			  CALL HEXADR
     46				     ;
     47	0022  B2 20			  MOV DL, ' '
     48	0024  E8 00C4			  CALL PUTCH
     49	0027  B2 3D			  MOV DL, '='
     50	0029  E8 00BF			  CALL PUTCH
     51	002C  B2 20			  MOV DL, ' '
     52	002E  E8 00BA			  CALL PUTCH
     53				     ; Вывод шестнадцатеричного	числа
     54	0031  E8 004E			  CALL PRINTHEX
     55	0034  B2 20			  MOV DL, ' '
     56	0036  E8 00B2			  CALL PUTCH
     57	0039  B2 20			  MOV DL, ' '
Turbo Assembler	 Version 3.1	    04/23/24 12:56:01	    Page 2
laba7.asm



     58	003B  E8 00AD			  CALL PUTCH
     59				     ; Перевод в десятичное и печать
     60	003E  E8 0055			  CALL DECPRINT
     61				     ; Цикл вывода шетнадцатеричной строки
     62	0041  E8 00AC			 CALL LFCR
     63	0044  E2 D2		     LOOP METLOOP
     64
     65	0046			     MEND:
     66				     ; Ожидание	завершения программы
     67				     ;	  MOV AH, 01H
     68				     ;	  INT 021H
     69				     ; Очистка экрана
     70	0046  B4 00			 MOV AH, 00H
     71	0048  B0 03			 MOV AL, 03H
     72	004A  CD 10			 INT  10H
     73
     74				     ; Выход из	прораммы
     75	004C  B4 4C			 MOV AH, 4Ch
     76	004E  B0 00			 MOV AL, 0
     77	0050  CD 21			 INT 21H
     78				     ; Продецуры программы
     79	0052			     HEXADR PROC
     80				     ; Подготовка цикла	ввода
     81	0052  BE 004Br			  MOV SI , OFFSET BUF
     82	0055  B9 0004			  MOV CX , 4
     83				     ; Цикл
     84	0058			     MVVOD:
     85	0058			     MCICL:
     86	0058  83 F9 04			 CMP CX	, 4
     87	005B  74 07			 JE MC1
     88	005D  E8 009B			 CALL GETSIMB
     89	0060  3C 2A			 CMP AL, '*'
     90	0062  74 E2			 JE MEND
     91	0064			     MC1:
     92				     ; Проверка	символа	на правильность
     93	0064  3C 30			  CMP AL , 30H
     94	0066  7C F0			  JL MCICL
     95	0068  3C 39			  CMP AL , 39H
     96	006A  7E 08			  JLE MBUF
     97	006C  3C 41			  CMP AL , 65
     98	006E  7C E8			  JL MCICL
     99	0070  3C 46			  CMP AL , 70
    100	0072  7F E4			  JG MCICL
    101				     ; Запись в	буфер и	печать
    102	0074			     MBUF:
    103	0074  88 04			  MOV [SI], AL
    104	0076  46			  INC SI
    105				     ; Печать символа
    106	0077  8A D0			  MOV DL, AL
    107	0079  E8 006F			  CALL PUTCH
    108	007C  E2 DA			  LOOP MVVOD
    109				     ;
    110	007E  C6 04 24			  MOV  BYTE PTR	[SI], '$'
    111	0081  C3			  RET
    112	0082			     HEXADR ENDP
    113				     ;;
    114	0082			     PRINTHEX PROC
Turbo Assembler	 Version 3.1	    04/23/24 12:56:01	    Page 3
laba7.asm



    115	0082  BA 004Br			   MOV DX , OFFSET BUF
    116	0085  B4 09			   MOV AH , 09H
    117	0087  CD 21			   INT 21h
    118	0089  C3			   RET
    119	008A			     PRINTHEX ENDP
    120				     ;
    121	008A			     SIMPER PROC
    122	008A  3C 39			    CMP	AL , 39H
    123	008C  7F 05			    JG MS1
    124	008E  2C 30			    SUB	AL , 30H
    125	0090  EB 03 90			    JMP	MS2
    126	0093  2C 37		     MS1:   SUB	AL , 55
    127	0095			     MS2:
    128	0095  C3			    RET
    129	0096			     SIMPER ENDP
    130	0096			     DECPRINT PROC
    131				     ; Первод в	машинное представление
    132	0096  BE 004Br			    MOV	SI , OFFSET BUF
    133	0099  BB 1000			    MOV	BX , 4096
    134	009C  C7 06 00AFr 0000		    MOV	DECW , 0
    135	00A2  B9 0004			    MOV	CX , 4
    136	00A5			     CPER:
    137	00A5  8A 04			    MOV	AL , [SI]
    138	00A7  E8 FFE0			    CALL SIMPER
    139	00AA  B4 00			    MOV	AH, 0
    140	00AC  F7 E3			    MUL	BX
    141	00AE  8B 16 00AFr		    MOV	DX , DECW
    142	00B2  03 D0			    ADD	DX , AX
    143	00B4  89 16 00AFr		    MOV	DECW , DX
    144	00B8  D1 EB			    SHR	BX , 1
    145	00BA  D1 EB			    SHR	BX , 1
    146	00BC  D1 EB			    SHR	BX , 1
    147	00BE  D1 EB			    SHR	BX , 1
    148	00C0  46			    INC	SI
    149	00C1  E2 E2			    LOOP  CPER
    150				     ; Перевод в десятичное представление
    151	00C3  B9 0005			    MOV	CX , 5
    152	00C6  BB 2710			    MOV	BX , 10000
    153				     ;
    154	00C9			     MDEC:
    155	00C9  A1 00AFr			    MOV	AX , DECW
    156	00CC  BA 0000			    MOV	DX , 0
    157	00CF  F7 F3			    DIV	BX
    158	00D1  89 16 00AFr		    MOV	DECW , DX
    159	00D5  04 30			    ADD	AL , 30H
    160	00D7  8A D0			    MOV	DL , AL
    161	00D9  E8 000F			    CALL PUTCH
    162	00DC  8B C3			    MOV	AX, BX
    163	00DE  BA 0000			    MOV	DX , 0
    164	00E1  BB 000A			    MOV	BX , 10
    165	00E4  F7 F3			    DIV	BX
    166	00E6  8B D8			    MOV	BX , AX
    167	00E8  E2 DF			    LOOP MDEC
    168	00EA  C3			    RET
    169	00EB			     DECPRINT ENDP
    170
    171				     ; Процедура вывода	символа	на DL
Turbo Assembler	 Version 3.1	    04/23/24 12:56:01	    Page 4
laba7.asm



    172	00EB			     PUTCH PROC
    173	00EB  B4 02			   MOV AH , 2
    174	00ED  CD 21			   INT 21H
    175	00EF  C3			   RET
    176	00F0			     PUTCH ENDP
    177				     ; Процедура перевода строки
    178	00F0			     LFCR PROC
    179	00F0  B2 0A			  MOV DL, 10
    180	00F2  E8 FFF6			  CALL PUTCH
    181	00F5  B2 0D			  MOV DL, 13
    182	00F7  E8 FFF1			  CALL PUTCH
    183	00FA  C3			  RET
    184	00FB			     LFCR ENDP
    185
    186				     ; Procedyra vivoda	simvola
    187	00FB			     GETSIMB PROC
    188				     ; enter simbol
    189	00FB  B4 08			 MOV AH, 08H
    190	00FD  CD 21			 INT 21H
    191	00FF  C3			 RET
    192	0100			     GETSIMB ENDP
    193				     ;
    194	0100			     MYCODE ENDS
    195
    196					END START
Turbo Assembler	 Version 3.1	    04/23/24 12:56:01	    Page 5
Symbol Table




Symbol Name		Type   Value			   Cref	(defined at #)

??DATE			Text   "04/23/24"
??FILENAME		Text   "laba7	"
??TIME			Text   "12:56:01"
??VERSION		Number 030A
@CPU			Text   0101H
@CURSEG			Text   MYCODE			   #1  #18  #22
@FILENAME		Text   LABA7
@WORDSIZE		Text   2			   #1  #18  #22
BUF			Byte   DATASG:004B		   #14	81  115	 132
CPER			Near   MYCODE:00A5		   #136	 149
DECPRINT		Near   MYCODE:0096		   60  #130
DECW			Word   DATASG:00AF		   #15	134  141  143  155  158
GETSIMB			Near   MYCODE:00FB		   41  88  #187
HEXADR			Near   MYCODE:0052		   45  #79
LFCR			Near   MYCODE:00F0		   36  62  #178
MBUF			Near   MYCODE:0074		   96  #102
MC1			Near   MYCODE:0064		   87  #91
MCICL			Near   MYCODE:0058		   #85	94  98	100
MDEC			Near   MYCODE:00C9		   #154	 167
MEND			Near   MYCODE:0046		   43  #65  90
METLOOP			Near   MYCODE:0018		   #39	63
MS1			Near   MYCODE:0093		   123	#126
MS2			Near   MYCODE:0095		   125	#127
MSG			Byte   DATASG:0010		   #5  34
MVVOD			Near   MYCODE:0058		   #84	108
PRINTHEX		Near   MYCODE:0082		   54  #114
PUTCH			Near   MYCODE:00EB		   48  50  52  56  58  107  161	 #172  180  182
SIMPER			Near   MYCODE:008A		   #121	 138
START			Near   MYCODE:0000		   #24	196
TABLHEX			Byte   DATASG:0000		   #2

Groups & Segments	Bit Size Align	Combine	Class	   Cref	(defined at #)

DATASG			16  00B1 Para	none	DATA	   #1  23  26
MYCODE			16  0100 Para	none	CODE	   #22	23
STSEG			16  0200 Para	Stack	STACK	   #18	23
